(this["webpackJsonprif-id-manager"]=this["webpackJsonprif-id-manager"]||[]).push([[0],{171:function(e){e.exports=JSON.parse('{"a":"0.1.0"}')},179:function(e,t,n){},252:function(e,t){},253:function(e,t){},292:function(e,t){},294:function(e,t){},304:function(e,t){},306:function(e,t){},335:function(e,t){},337:function(e,t){},344:function(e,t){},345:function(e,t){},369:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n(8),i=n.n(r),s=n(170),l=n.n(s),j=n(5),o=n(21),d=n.p+"static/media/rif-credential-viewer.5cd41cae.svg",u=n.p+"static/media/powered-by-iov.5db81567.svg",b=(n(179),n(171));!function(e){e.START="START",e.LOADING="LOADING",e.ERROR="ERROR",e.DECODED="DECODED"}(c||(c={}));var O={status:c.START,message:"",jwt:void 0,credential:void 0},v=function(e){var t=e.disabled,n=e.handleDecode,c=e.initialText,i=Object(r.useState)(c||""),s=Object(o.a)(i,2),l=s[0],d=s[1],u=Object(r.useState)(!0),b=Object(o.a)(u,2),O=b[0],v=b[1],h={disabled:t};return Object(a.jsxs)("div",{children:[Object(a.jsx)("textarea",Object(j.a)(Object(j.a)({},h),{},{value:l,onChange:function(e){return d(e.target.value)},className:"userInput"})),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",Object(j.a)(Object(j.a)({},h),{},{type:"checkbox",checked:O,className:"ethSignCheck",onChange:function(e){return v(e.target.checked)}})),"Use ethSign"]})}),Object(a.jsx)("button",Object(j.a)(Object(j.a)({},h),{},{onClick:function(){return n(l.trim().replace(/\n/g," "),O)},className:"submit",children:"Decode Presentation"}))]})},h=function(e){var t=e.message;return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("p",{className:"alert",children:t})})})},f=n(173),x=n(172),p=n(93),m=new f.a(Object(x.getResolver)({networks:[{name:"rsk:testnet",rpcUrl:"https://did.testnet.rsk.co:4444",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b"},{name:"rsk",rpcUrl:"https://did.rsk.co:4444",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b"},{name:"mainnet",rpcUrl:"https://mainnet.infura.io/v3/8c2e55bc61b94ad781c4deae786c4f58",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b"}]})),g=function(e,t){return Object(p.verifyJWT)(e,{ethSign:t,resolver:m})},N=function(){return Object(a.jsx)("div",{className:"panel",style:{textAlign:"center"},children:"LOADING"})},w=n(22),y=n.n(w),S=n(55),D="Signature invalid for JWT",R=function(e){var t=e.label,n=e.value,c=e.validation;if(!n)return Object(a.jsx)(a.Fragment,{});var r=new Date(1e3*n),i=r.toLocaleString(),s="datetime";return("PAST"===c&&r<new Date||"FUTURE"===c&&r>new Date)&&(s+=" invalid"),Object(a.jsx)(k,{className:s,label:t,value:i})},k=function(e){var t=e.label,n=e.value,c=e.className;return n?Object(a.jsxs)("div",{className:c?"container ".concat(c):"container",children:[Object(a.jsx)("div",{className:"column-3 label",children:Object(a.jsx)("p",{children:t})}),Object(a.jsx)("div",{className:"column-9 value",children:Object(a.jsx)("p",{children:n})})]}):Object(a.jsx)(a.Fragment,{})},T=function(e){var t,n,c=e.payload;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(R,{label:"Issued At",value:(null===c||void 0===c?void 0:c.iat)||null}),Object(a.jsx)(R,{label:"Expires",value:(null===(t=c.vp)||void 0===t?void 0:t.exp)||(null===(n=c.vc)||void 0===n?void 0:n.exp)||null,validation:"PAST"}),Object(a.jsx)(R,{label:"Not Valid Before",value:(null===c||void 0===c?void 0:c.nbf)||null,validation:"FUTURE"})]})},C=function(e){var t,n=e.jwt,c=e.credential,i={ethSign:!1,error:null,credential:c},s=Object(r.useState)(i),l=Object(o.a)(s,2),d=l[0],u=l[1],b=function(){var e=Object(S.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(Object(j.a)(Object(j.a)({},d),{},{error:null}));case 2:n&&g(n,t).then(function(){var e=Object(S.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(Object(j.a)(Object(j.a)({},d),{},{error:null,ethSign:t,credential:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(S.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(Object(j.a)(Object(j.a)({},d),{},{ethSign:t,error:n.message}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){!c&&b(d.ethSign)}),[n]),d.error)return Object(a.jsxs)("div",{className:"panel credential",children:[Object(a.jsx)("h3",{children:"VerifiableCredential"}),Object(a.jsx)(h,{message:d.error}),d.error===D&&Object(a.jsxs)("button",{onClick:function(){console.log("click again"),b(!d.ethSign)},children:["Try again ",Object(a.jsx)("strong",{children:d.ethSign?"without":"with"})," eth sign."]})]});if(!d.credential)return Object(a.jsx)(N,{});var O=d.credential.payload,v=d.credential.payload.vc.credentialSubject;return Object(a.jsxs)("div",{className:"panel credential",children:[Object(a.jsx)("h3",{children:null===(t=O.vc.type)||void 0===t?void 0:t.join(": ")}),Object(a.jsx)(k,{className:"did",label:"Issuer",value:O.iss}),Object(a.jsx)(k,{className:"did",label:"Subject",value:O.sub}),Object(a.jsx)(T,{payload:O}),Object(a.jsx)("h4",{children:"CredentialSubject"}),v&&Object.keys(v).map((function(e){return Object(a.jsx)(k,{value:v[e],label:e},e)}))]})},E=function(e){var t,n=e.presentation;return Object(a.jsxs)("div",{className:"panel presentation",children:[Object(a.jsx)("h3",{children:null===(t=n.payload.vp.type)||void 0===t?void 0:t.join(": ")}),Object(a.jsx)(k,{className:"did",label:"Issuer",value:n.issuer}),Object(a.jsx)(T,{payload:n.payload}),n.payload.vp.verifiableCredential.map((function(e){return Object(a.jsx)(C,{jwt:e},e)}))]})};var A=function(){var e=Object(r.useState)(O),t=Object(o.a)(e,2),n=t[0],i=t[1],s=function(e,t){i(Object(j.a)(Object(j.a)({},O),{},{status:c.LOADING})),g(e,t).then((function(t){return i(Object(j.a)(Object(j.a)({},n),{},{jwt:e,credential:t,status:c.DECODED}))})).catch((function(e){var t=e.message===D?"".concat(e.message,", try toggling 'Use ethSign'."):e.message;i(Object(j.a)(Object(j.a)({},O),{},{message:t,status:c.ERROR}))}))},l=window.location.search.startsWith("?jwt=")?window.location.search.replace("?jwt=",""):"";return Object(r.useEffect)((function(){""!==l&&s(l,!0)}),[window.location.search]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{className:"container header",children:Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("img",{src:d,alt:"RIF Credential Viewer"})})}),Object(a.jsxs)("div",{className:"container content",children:[Object(a.jsxs)("div",{className:"column column-6",children:[Object(a.jsx)("h2",{children:"Raw JWT"}),Object(a.jsx)(v,{disabled:n.status===c.LOADING,handleDecode:s,initialText:l})]}),Object(a.jsxs)("div",{className:"column column-6",children:[Object(a.jsx)("h2",{children:"Decoded"}),n.credential&&n.credential.payload.vp&&Object(a.jsx)(E,{presentation:n.credential}),n.credential&&n.credential.payload.vc&&Object(a.jsx)(C,{credential:n.credential}),n.status===c.ERROR&&Object(a.jsx)("div",{className:"panel",children:Object(a.jsx)(h,{message:n.message})}),n.status===c.LOADING&&Object(a.jsx)(N,{})]})]}),Object(a.jsx)("div",{className:"container footer",children:Object(a.jsxs)("div",{className:"column",children:[Object(a.jsx)("img",{src:u,alt:"Powered By RIF"}),Object(a.jsx)("p",{children:"Copyright \xa9 2021 IOV Labs. All rights reserved."}),Object(a.jsxs)("p",{children:["Version ",b.a]})]})})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,370)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(A,{})}),document.getElementById("root")),I()}},[[369,1,2]]]);
//# sourceMappingURL=main.fccea1fd.chunk.js.map