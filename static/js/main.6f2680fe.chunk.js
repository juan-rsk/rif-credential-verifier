(this["webpackJsonprif-credential-manager"]=this["webpackJsonprif-credential-manager"]||[]).push([[0],{173:function(e){e.exports=JSON.parse('{"a":"0.1.0"}')},183:function(e,t,c){},256:function(e,t){},257:function(e,t){},294:function(e,t){},296:function(e,t){},306:function(e,t){},308:function(e,t){},337:function(e,t){},339:function(e,t){},346:function(e,t){},347:function(e,t){},375:function(e,t,c){"use strict";c.r(t);var n,a=c(0),s=c(5),i=c.n(s),r=c(172),l=c.n(r),j=c(8),d=c(12),b=c.p+"static/media/rif-credential-viewer.5cd41cae.svg",o=c.p+"static/media/powered-by-iov.5db81567.svg",u=(c(183),c(173));!function(e){e.START="START",e.LOADING="LOADING",e.ERROR="ERROR",e.DECODED="DECODED"}(n||(n={}));var O={status:n.START,message:"",jwt:void 0,credential:void 0},v=function(e){var t=e.disabled,c=e.handleDecode,n=e.initialText,i=Object(s.useState)(n||""),r=Object(d.a)(i,2),l=r[0],b=r[1],o=Object(s.useState)(!0),u=Object(d.a)(o,2),O=u[0],v=u[1],h={disabled:t};return Object(a.jsxs)("div",{children:[Object(a.jsx)("textarea",Object(j.a)(Object(j.a)({},h),{},{value:l,onChange:function(e){return b(e.target.value)},className:"userInput"})),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",Object(j.a)(Object(j.a)({},h),{},{type:"checkbox",checked:O,className:"ethSignCheck",onChange:function(e){return v(e.target.checked)}})),"Use ethSign"]})}),Object(a.jsx)("button",Object(j.a)(Object(j.a)({},h),{},{onClick:function(){return c(l.trim().replace(/\n/g," "),O)},className:"submit",children:"Decode JWT"}))]})},h=function(e){var t=e.message;return Object(a.jsx)("p",{className:"alert",children:t})},x=c(177),f=c(174),m=c(175),p=c(176),g=new x.a(Object(f.getResolver)({networks:[{name:"rsk:testnet",rpcUrl:"https://did.testnet.rsk.co:4444",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b"},{name:"rsk",rpcUrl:"https://did.rsk.co:4444",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b"},{name:"mainnet",rpcUrl:"https://mainnet.infura.io/v3/8c2e55bc61b94ad781c4deae786c4f58",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b"}]})),w=function(e,t){return Object(p.verifyJWT)(e,{ethSign:t,resolver:g})},N=function(){return Object(a.jsx)("div",{className:"panel",style:{textAlign:"center"},children:Object(a.jsx)("div",{className:"loader",children:" "})})},y="Signature invalid for JWT",S=function(e){var t=e.label,c=e.value,n=e.validation;if(!c)return Object(a.jsx)(a.Fragment,{});var s=new Date(1e3*c),i=s.toLocaleString(),r="datetime";return("PAST"===n&&s<new Date||"FUTURE"===n&&s>new Date)&&(r+=" alert"),Object(a.jsx)(R,{className:r,label:t,value:i})},R=function(e){var t=e.label,c=e.value,n=e.className;return c?Object(a.jsxs)("div",{className:n?"container ".concat(n):"container",children:[Object(a.jsx)("div",{className:"column-3 label",children:Object(a.jsx)("p",{children:t})}),Object(a.jsx)("div",{className:"column-9 value",children:Object(a.jsx)("p",{children:c})})]}):Object(a.jsx)(a.Fragment,{})},D=function(e){var t,c,n=e.payload;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S,{label:"Issued At",value:(null===n||void 0===n?void 0:n.iat)||null}),Object(a.jsx)(S,{label:"Expires",value:(null===(t=n.vp)||void 0===t?void 0:t.exp)||(null===(c=n.vc)||void 0===c?void 0:c.exp)||null,validation:"PAST"}),Object(a.jsx)(S,{label:"Not Valid Before",value:(null===n||void 0===n?void 0:n.nbf)||null,validation:"FUTURE"})]})},T=function(e){var t=e.jwt;try{var c=function(e){return Object(m.decodeJWT)(e)}(t);return Object(a.jsx)("pre",{className:"raw",children:JSON.stringify(c,null,2)})}catch(n){return Object(a.jsx)("div",{className:"alert",children:n.message})}},k=function(e){var t,c=e.jwt,n=e.credential,i=e.verifyVerifiableJwt,r=Object(s.useState)(!1),l=Object(d.a)(r,2),j=l[0],b=l[1],o=Object(s.useState)(null),u=Object(d.a)(o,2),O=u[0],v=u[1],x=Object(s.useState)(null),f=Object(d.a)(x,2),m=f[0],p=f[1],g=Object(s.useState)(!1),w=Object(d.a)(g,2),S=w[0],k=w[1],C=function(e){v(null),b(e),i&&c&&i(c,e).then((function(e){return p(e)})).catch((function(e){return v(e.message)}))};if(Object(s.useEffect)((function(){n?p(n):C(j)}),[c]),O)return Object(a.jsxs)("div",{className:"panel error",children:[Object(a.jsx)("h3",{children:"VerifiableCredential"}),Object(a.jsx)(h,{message:O}),O===y&&Object(a.jsxs)("button",{onClick:function(){C(!j)},children:["Try again ",Object(a.jsx)("strong",{children:j?"without":"with"})," eth sign."]})]});if(!m)return Object(a.jsx)(N,{});var E=m.payload,A=m.payload.vc.credentialSubject;return Object(a.jsxs)("div",{className:"panel credential",children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("h3",{children:null===(t=E.vc.type)||void 0===t?void 0:t.join(": ")})}),Object(a.jsx)("div",{className:"column",children:Object(a.jsxs)("button",{className:"raw link",onClick:function(){return k(!S)},children:[S?"Hide":"Show"," Raw"]})})]}),S&&c&&Object(a.jsx)(T,{jwt:c}),Object(a.jsx)(R,{className:"did",label:"Issuer",value:E.iss}),Object(a.jsx)(R,{className:"did",label:"Subject",value:E.sub}),Object(a.jsx)(D,{payload:E}),Object(a.jsx)("h4",{children:"CredentialSubject"}),A&&Object.keys(A).map((function(e){return Object(a.jsx)(R,{value:A[e],label:e},e)}))]})},C=function(e){var t,c=e.jwt,n=e.presentation,i=e.verifyVerifiableJwt,r=Object(s.useState)(!1),l=Object(d.a)(r,2),j=l[0],b=l[1];return Object(a.jsxs)("div",{className:"panel presentation",children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("h3",{children:null===(t=n.payload.vp.type)||void 0===t?void 0:t.join(": ")})}),Object(a.jsx)("div",{className:"column",children:Object(a.jsxs)("button",{className:"raw link",onClick:function(){return b(!j)},children:[j?"Hide":"Show"," Raw"]})})]}),c&&j&&Object(a.jsx)(T,{jwt:c}),Object(a.jsx)(R,{className:"did",label:"Issuer",value:n.issuer}),Object(a.jsx)(D,{payload:n.payload}),n.payload.vp.verifiableCredential.map((function(e){return Object(a.jsx)(k,{jwt:e,verifyVerifiableJwt:i},e)}))]})};var E=function(){var e=Object(s.useState)(O),t=Object(d.a)(e,2),c=t[0],i=t[1],r=function(e,t){i(Object(j.a)(Object(j.a)({},O),{},{status:n.LOADING})),w(e,t).then((function(t){return i(Object(j.a)(Object(j.a)({},c),{},{jwt:e,credential:t,status:n.DECODED}))})).catch((function(e){var t=e.message===y?"".concat(e.message,", try toggling 'Use ethSign'."):e.message;i(Object(j.a)(Object(j.a)({},O),{},{message:t,status:n.ERROR}))}))},l=window.location.search.startsWith("?jwt=")?window.location.search.replace("?jwt=",""):"";return Object(s.useEffect)((function(){""!==l&&r(l,!0)}),[window.location.search]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{className:"container header",children:Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("img",{src:b,alt:"RIF Credential Viewer"})})}),Object(a.jsxs)("div",{className:"container content",children:[Object(a.jsxs)("div",{className:"column column-6",children:[Object(a.jsx)("h2",{children:"Raw JWT"}),Object(a.jsx)(v,{disabled:c.status===n.LOADING,handleDecode:r,initialText:l})]}),Object(a.jsxs)("div",{className:"column column-6",children:[Object(a.jsx)("h2",{children:"Decoded"}),c.credential&&c.credential.payload.vp&&Object(a.jsx)(C,{presentation:c.credential,verifyVerifiableJwt:w,jwt:c.jwt}),c.credential&&c.credential.payload.vc&&Object(a.jsx)(k,{credential:c.credential,verifyVerifiableJwt:w,jwt:c.jwt}),c.status===n.ERROR&&Object(a.jsx)("div",{className:"panel",children:Object(a.jsx)(h,{message:c.message})}),c.status===n.LOADING&&Object(a.jsx)(N,{})]})]}),Object(a.jsx)("div",{className:"container footer",children:Object(a.jsxs)("div",{className:"column",children:[Object(a.jsx)("img",{src:o,alt:"Powered By RIF"}),Object(a.jsx)("p",{children:"Copyright \xa9 2021 IOV Labs. All rights reserved."}),Object(a.jsxs)("p",{children:["Version ",u.a]})]})})]})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,376)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(E,{})}),document.getElementById("root")),A()}},[[375,1,2]]]);
//# sourceMappingURL=main.6f2680fe.chunk.js.map